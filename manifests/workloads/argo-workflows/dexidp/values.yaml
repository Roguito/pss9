image:
  repository: core.harbor.homelab.danmanners.com/ghcr.io/dexidp/dex

https:
  enabled: true

grpc:
  enabled: false

serviceAccount:
  create: true

ingress:
  enabled: true
  className: nginx
  hosts:
  - host: dex.homelab.danmanners.com
    paths:
    - path: /
      pathType: Prefix
  tls:
  - hosts:
    - dex.homelab.danmanners.com
    secretName: workflows-dex-cert

envFrom:
- secretRef:
    name: dex-config

volumes:
- name: ssl
  secret:
    secretName: dexidp-internal-tls

volumeMounts:
- name: ssl
  mountPath: /etc/dex/ssl
  readOnly: true

config:
  issuer: https://dex.homelab.danmanners.com/dex
  inCluster: true
  storage:
    type: memory
  web:
    http: 0.0.0.0:5556
    https: 0.0.0.0:5554
    tlsClientCA: /etc/dex/ssl/ca.crt
    tlsCert: /etc/dex/ssl/tls.crt
    tlsKey: /etc/dex/ssl/tls.key
  connectors:
  - type: github
    id: github
    name: GitHub
    config:
      clientID: $GITHUB_CLIENT_ID
      clientSecret: $GITHUB_CLIENT_SECRET
      redirectURI: https://dex.homelab.danmanners.com/dex/callback
      orgs:
      - name: goodmannershosting
